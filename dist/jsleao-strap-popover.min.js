/**
 * jsleao-strap-popover
 * @version v2.1.1 - 2014-10-17
 * @link http://mgcrea.github.io/angular-strap
 * @author Olivier Louvignes (olivier@mg-crea.com)
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */
!function(t,e){"use strict";angular.module("jsleao.ngStrap.popover",["jsleao.ngStrap.tooltip","jsleao.ngStrap.popover"]),angular.module("jsleao.ngStrap.helpers.dimensions",[]).factory("dimensions",["$document","$window",function(){var e=(angular.element,{}),o=e.nodeName=function(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()};e.css=function(e,o,n){var i;return i=e.currentStyle?e.currentStyle[o]:t.getComputedStyle?t.getComputedStyle(e)[o]:e.style[o],n===!0?parseFloat(i)||0:i},e.offset=function(e){var o=e.getBoundingClientRect(),n=e.ownerDocument;return{width:o.width||e.offsetWidth,height:o.height||e.offsetHeight,top:o.top+(t.pageYOffset||n.documentElement.scrollTop)-(n.documentElement.clientTop||0),left:o.left+(t.pageXOffset||n.documentElement.scrollLeft)-(n.documentElement.clientLeft||0)}},e.position=function(t){var i,r,a={top:0,left:0};return"fixed"===e.css(t,"position")?r=t.getBoundingClientRect():(i=n(t),r=e.offset(t),r=e.offset(t),o(i,"html")||(a=e.offset(i)),a.top+=e.css(i,"borderTopWidth",!0),a.left+=e.css(i,"borderLeftWidth",!0)),{width:t.offsetWidth,height:t.offsetHeight,top:r.top-a.top-e.css(t,"marginTop",!0),left:r.left-a.left-e.css(t,"marginLeft",!0)}};var n=function(t){var n=t.ownerDocument,i=t.offsetParent||n;if(o(i,"#document"))return n.documentElement;for(;i&&!o(i,"html")&&"static"===e.css(i,"position");)i=i.offsetParent;return i||n.documentElement};return e.height=function(t,o){var n=t.offsetHeight;return o?n+=e.css(t,"marginTop",!0)+e.css(t,"marginBottom",!0):n-=e.css(t,"paddingTop",!0)+e.css(t,"paddingBottom",!0)+e.css(t,"borderTopWidth",!0)+e.css(t,"borderBottomWidth",!0),n},e.width=function(t,o){var n=t.offsetWidth;return o?n+=e.css(t,"marginLeft",!0)+e.css(t,"marginRight",!0):n-=e.css(t,"paddingLeft",!0)+e.css(t,"paddingRight",!0)+e.css(t,"borderLeftWidth",!0)+e.css(t,"borderRightWidth",!0),n},e}]),angular.module("jsleao.ngStrap.popover",["jsleao.ngStrap.tooltip"]).provider("$popover",function(){var t=this.defaults={animation:"am-fade",customClass:"",container:!1,target:!1,placement:"right",template:"popover/popover.tpl.html",contentTemplate:!1,trigger:"click",keyboard:!0,html:!1,title:"",content:"",delay:0};this.$get=["$tooltip",function(e){function o(o,n){var i=angular.extend({},t,n),r=e(o,i);return i.content&&(r.$scope.content=i.content),r}return o}]}).directive("bsPopover",["$window","$sce","$popover",function(t,e,o){var n=t.requestAnimationFrame||t.setTimeout;return{restrict:"EAC",scope:!0,link:function(t,i,r){var a={scope:t};angular.forEach(["template","contentTemplate","placement","container","target","delay","trigger","keyboard","html","animation","customClass"],function(t){angular.isDefined(r[t])&&(a[t]=r[t])}),angular.forEach(["title","content"],function(o){r[o]&&r.$observe(o,function(i,r){t[o]=e.trustAsHtml(i),angular.isDefined(r)&&n(function(){s&&s.$applyPlacement()})})}),r.bsPopover&&t.$watch(r.bsPopover,function(e,o){angular.isObject(e)?angular.extend(t,e):t.content=e,angular.isDefined(o)&&n(function(){s&&s.$applyPlacement()})},!0),r.bsShow&&t.$watch(r.bsShow,function(t){s&&angular.isDefined(t)&&(angular.isString(t)&&(t=!!t.match(/true|,?(popover),?/i)),t===!0?s.show():s.hide())});var s=o(i,a);t.$on("$destroy",function(){s&&s.destroy(),a=null,s=null})}}}]),angular.module("jsleao.ngStrap.tooltip",["jsleao.ngStrap.helpers.dimensions"]).provider("$tooltip",function(){var t=this.defaults={animation:"am-fade",customClass:"",prefixClass:"tooltip",prefixEvent:"tooltip",container:!1,target:!1,placement:"top",template:"tooltip/tooltip.tpl.html",contentTemplate:!1,trigger:"hover focus",keyboard:!1,html:!1,show:!1,title:"",type:"",delay:0};this.$get=["$window","$rootScope","$compile","$q","$templateCache","$http","$animate","dimensions","$$rAF",function(o,n,i,r,a,s,l,c,u){function f(e,o){function r(){y.$emit(w.prefixEvent+".show",$)}function a(){return y.$emit(w.prefixEvent+".hide",$),blur&&"focus"===w.trigger?e[0].blur():void 0}function s(){return"body"===w.container?c.offset(w.target[0]||e[0]):c.position(w.target[0]||e[0])}function f(t,e,o,n){var i,r=t.split("-");switch(r[0]){case"right":i={top:e.top+e.height/2-n/2,left:e.left+e.width};break;case"bottom":i={top:e.top+e.height,left:e.left+e.width/2-o/2};break;case"left":i={top:e.top+e.height/2-n/2,left:e.left-o};break;default:i={top:e.top-n,left:e.left+e.width/2-o/2}}if(!r[1])return i;if("top"===r[0]||"bottom"===r[0])switch(r[1]){case"left":i.left=e.left;break;case"right":i.left=e.left+e.width-o}else if("left"===r[0]||"right"===r[0])switch(r[1]){case"top":i.top=e.top-n;break;case"bottom":i.top=e.top+e.height}return i}var $={},v=e[0].nodeName.toLowerCase(),w=$.$options=angular.extend({},t,o);$.$promise=d(w.template);var y=$.$scope=w.scope&&w.scope.$new()||n.$new();if(w.delay&&angular.isString(w.delay)){var b=w.delay.split(",").map(parseFloat);w.delay=b.length>1?{show:b[0],hide:b[1]}:b[0]}w.title&&($.$scope.title=w.title),y.$hide=function(){y.$$postDigest(function(){$.hide()})},y.$show=function(){y.$$postDigest(function(){$.show()})},y.$toggle=function(){y.$$postDigest(function(){$.toggle()})},$.$isShown=y.$isShown=!1;var S,T;w.contentTemplate&&($.$promise=$.$promise.then(function(t){var e=angular.element(t);return d(w.contentTemplate).then(function(t){var o=p('[ng-bind="content"]',e[0]);return o.length||(o=p('[ng-bind="title"]',e[0])),o.removeAttr("ng-bind").html(t),e[0].outerHTML})}));var k,C,E,D;return $.$promise.then(function(t){angular.isObject(t)&&(t=t.data),w.html&&(t=t.replace(m,'ng-bind-html="')),t=h.apply(t),E=t,k=i(t),$.init()}),$.init=function(){w.delay&&angular.isNumber(w.delay)&&(w.delay={show:w.delay,hide:w.delay}),"self"===w.container?D=e:angular.isElement(w.container)?D=w.container:w.container&&(D=p(w.container));var t=w.trigger.split(" ");angular.forEach(t,function(t){"click"===t?e.on("click",$.toggle):"manual"!==t&&(e.on("hover"===t?"mouseenter":"focus",$.enter),e.on("hover"===t?"mouseleave":"blur",$.leave),"button"===v&&"hover"!==t&&e.on(g?"touchstart":"mousedown",$.$onFocusElementMouseDown))}),w.target&&(w.target=angular.isElement(w.target)?w.target:p(w.target)),w.show&&y.$$postDigest(function(){"focus"===w.trigger?e[0].focus():$.show()})},$.destroy=function(){for(var t=w.trigger.split(" "),o=t.length;o--;){var n=t[o];"click"===n?e.off("click",$.toggle):"manual"!==n&&(e.off("hover"===n?"mouseenter":"focus",$.enter),e.off("hover"===n?"mouseleave":"blur",$.leave),"button"===v&&"hover"!==n&&e.off(g?"touchstart":"mousedown",$.$onFocusElementMouseDown))}C&&(C.remove(),C=null),clearTimeout(S),y.$destroy()},$.enter=function(){return clearTimeout(S),T="in",w.delay&&w.delay.show?void(S=setTimeout(function(){"in"===T&&$.show()},w.delay.show)):$.show()},$.show=function(){y.$emit(w.prefixEvent+".show.before",$);var t=w.container?D:null,o=w.container?null:e;C&&C.remove(),C=$.$element=k(y,function(){}),C.css({top:"-9999px",left:"-9999px",display:"block",visibility:"hidden"}).addClass(w.placement),w.animation&&C.addClass(w.animation),w.type&&C.addClass(w.prefixClass+"-"+w.type),w.customClass&&C.addClass(w.customClass);var n=l.enter(C,t,o,r);n&&n.then&&n.then(r),$.$isShown=y.$isShown=!0,y.$$phase||y.$root&&y.$root.$$phase||y.$digest(),u(function(){$.$applyPlacement(),C.css({visibility:"visible"})}),w.keyboard&&("focus"!==w.trigger?($.focus(),C.on("keyup",$.$onKeyUp)):e.on("keyup",$.$onFocusKeyUp))},$.leave=function(){return clearTimeout(S),T="out",w.delay&&w.delay.hide?void(S=setTimeout(function(){"out"===T&&$.hide()},w.delay.hide)):$.hide()},$.hide=function(){if($.$isShown){y.$emit(w.prefixEvent+".hide.before",$);var t=l.leave(C,a);t&&t.then&&t.then(a),$.$isShown=y.$isShown=!1,y.$$phase||y.$root&&y.$root.$$phase||y.$digest(),w.keyboard&&null!==C&&C.off("keyup",$.$onKeyUp)}},$.toggle=function(){$.$isShown?$.leave():$.enter()},$.focus=function(){C[0].focus()},$.$applyPlacement=function(){if(C){var t=s(),e=C.prop("offsetWidth"),o=C.prop("offsetHeight"),n=f(w.placement,t,e,o);n.top+="px",n.left+="px",C.css(n)}},$.$onKeyUp=function(t){27===t.which&&$.$isShown&&($.hide(),t.stopPropagation())},$.$onFocusKeyUp=function(t){27===t.which&&(e[0].blur(),t.stopPropagation())},$.$onFocusElementMouseDown=function(t){t.preventDefault(),t.stopPropagation(),$.$isShown?e[0].blur():e[0].focus()},$}function p(t,o){return angular.element((o||e).querySelectorAll(t))}function d(t){return r.when(a.get(t)||s.get(t)).then(function(e){return angular.isObject(e)?(a.put(t,e.data),e.data):e})}var h=String.prototype.trim,g="createTouch"in o.document,m=/ng-bind="/gi;return f}]}).directive("bsTooltip",["$window","$location","$sce","$tooltip","$$rAF",function(t,e,o,n,i){return{restrict:"EAC",scope:!0,link:function(t,e,r){var a={scope:t};angular.forEach(["template","contentTemplate","placement","container","target","delay","trigger","keyboard","html","animation","type","customClass"],function(t){angular.isDefined(r[t])&&(a[t]=r[t])}),r.$observe("title",function(e){if(angular.isDefined(e)||!t.hasOwnProperty("title")){var n=t.title;t.title=o.trustAsHtml(e),angular.isDefined(n)&&i(function(){s&&s.$applyPlacement()})}}),r.bsTooltip&&t.$watch(r.bsTooltip,function(e,o){angular.isObject(e)?angular.extend(t,e):t.title=e,angular.isDefined(o)&&i(function(){s&&s.$applyPlacement()})},!0),r.bsShow&&t.$watch(r.bsShow,function(t){s&&angular.isDefined(t)&&(angular.isString(t)&&(t=!!t.match(/true|,?(tooltip),?/i)),t===!0?s.show():s.hide())});var s=n(e,a);t.$on("$destroy",function(){s&&s.destroy(),a=null,s=null})}}}])}(window,document);
//# sourceMappingURL=jsleao-strap-popover.min.js.map